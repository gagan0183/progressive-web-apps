var deferredEvent,enableNotificationsButtons=document.querySelectorAll(".enable-notifications");function displayConfirmNotification(){var e;"serviceWorker"in navigator&&(e={body:"You have successfully subscribed to our Notification service!",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"ok",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]},navigator.serviceWorker.ready.then(function(i){i.showNotification("Successfully subscribed!",e)}))}function configurePushSub(){var e;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){return(e=i).pushManager.getSubscription()}).then(function(i){if(null===i)return i=urlBase64ToUint8Array("BBQt2JHPeJNVdWnh8UTPKOWGPrIVecsyblPZ1Kc4lgIKXPS4kxYDMEjyji1MwnKs-x_LPlW4d2kKCVQKpPEzs_8"),e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}).then(function(i){return fetch("https://learnpwa-ee647-default-rtdb.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){i.ok&&displayConfirmNotification()}).catch(function(i){console.log(i)})}function askForNotificationPermissions(){Notification.requestPermission(function(i){console.log("User choice",i),"granted"!==i?console.log("No notification permission granted"):configurePushSub()})}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{source:"."}).then(()=>{console.log("Service worker registered")}),window.addEventListener("beforeinstallprompt",i=>(console.log("before install prompt fired in the sites"),i.preventDefault(),deferredEvent=i,!1)),"Notification"in window&&"serviceWorker"in navigator&&enableNotificationsButtons.forEach(i=>{i.style.display="inline-block",i.addEventListener("click",askForNotificationPermissions)});